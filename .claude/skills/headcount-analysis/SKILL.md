# Headcount Analysis Skill

증원 요청의 원인을 분해하고 분석합니다. (유스케이스 C-1)

## 트리거

- `/headcount-analysis` 명령
- "증원 원인", "인력 요청 분석", "TO 요청" 프롬프트

## 실행 흐름

```
1단계: 증원 요청 파악
    ↓
2단계: 원인 분해
    ↓
3단계: 대안 분석
    ↓
4단계: 비용/효과 평가
    ↓
5단계: 권고안 제시
```

## 실행 단계

### 1단계: 증원 요청 파악

증원 요청의 상세 내용을 파악합니다.

**파악 항목:**
- 요청 팀/부서
- 요청 인원 수
- 요청 직급/역량
- 요청 사유
- 긴급도

### 2단계: 원인 분해

증원 요청의 근본 원인을 5Why 기법으로 분해합니다.

**원인 분류:**
| 유형 | 설명 | 예시 |
|------|------|------|
| 수요 증가 | 프로젝트/업무량 증가 | 신규 프로젝트 3건 |
| 공급 감소 | 이직/휴직 | 퇴직 2명 |
| 역량 부족 | 특정 스킬 부재 | AI/ML 전문가 없음 |
| 비효율 | 프로세스/배치 문제 | 역량 미스매치 |

**분해 쿼리:**
```cypher
// 팀 업무량 추이
MATCH (t:Team {name: $team_name})-[:ALLOCATED_TO]->(p:Project)
RETURN p.name, p.required_hours, p.start_date
ORDER BY p.start_date

// 팀 인력 변동
MATCH (t:Team {name: $team_name})-[:HAS_MEMBER]->(e:Employee)
RETURN e.status, count(e) as count

// 역량 보유 현황
MATCH (t:Team {name: $team_name})-[:HAS_MEMBER]->(e:Employee)-[:HAS_SKILL]->(s:Skill)
RETURN s.name, count(e) as count
```

### 3단계: 대안 분석

option-generator 에이전트를 호출하여 대안을 분석합니다.

**대안 템플릿:**
- **OPT-A (증원 승인)**: 요청대로 증원
- **OPT-B (업무 재배치)**: 기존 인력 재배치
- **OPT-C (외부 활용)**: 외주/파견 활용

### 4단계: 비용/효과 평가

각 대안의 비용과 효과를 평가합니다.

**평가 지표:**
| 지표 | OPT-A | OPT-B | OPT-C |
|------|-------|-------|-------|
| 초기 비용 | 높음 | 낮음 | 중간 |
| 연간 비용 | 높음 | - | 높음 |
| 실행 속도 | 느림 | 빠름 | 중간 |
| 장기 효과 | 높음 | 낮음 | 낮음 |

### 5단계: 권고안 제시

validator 에이전트를 통해 검증된 권고안을 제시합니다.

**권고 기준:**
| 조건 | 권고 |
|------|------|
| 수요 증가 + 장기 | 증원 승인 |
| 수요 증가 + 단기 | 외부 활용 |
| 역량 부족 | 채용 + 교육 |
| 비효율 문제 | 업무 재배치 |

## 자동 판단 로직

### 증원 타당성 판정

1. **승인 권고**:
   - 가동률 90% 이상 지속
   - 유사 역량 인력 부재
   - 수요 증가 장기화 예상

2. **재배치 권고**:
   - 타 팀 가동률 70% 미만
   - 유사 역량 인력 존재
   - 일시적 수요 증가

3. **외부 활용 권고**:
   - 특수 역량 필요
   - 단기 프로젝트
   - 채용 시간 부족

## 출력 예시

```
🔄 증원 원인분해 시작...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 1. 증원 요청 개요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

요청 팀: AI개발팀
요청 인원: 1명
요청 직급: 선임 (AI/ML)
요청 사유: "프로젝트 증가로 인한 인력 부족"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 2. 원인 분해 (5Why)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Why 1: 인력이 부족한가?
  → 현재 가동률 95% (6명 풀가동)

Why 2: 가동률이 높은 원인은?
  → 신규 프로젝트 2건 추가 (DX, AI PoC)

Why 3: 기존 인력으로 대응 불가한가?
  → AI/ML 전문 인력 2명 → 3건 동시 불가

Why 4: 타 팀 지원은?
  → 데이터팀 AI 역량자 1명 있으나 타 프로젝트 배정

Why 5: 근본 원인은?
  → AI 프로젝트 수요 증가 vs AI 전문 인력 부족

📌 근본 원인: 수요 증가 + 역량 부족

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 3. 수요/공급 분석
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[수요]
- 현재 프로젝트: 3건
- 예정 프로젝트: 2건 (Q2)
- 총 필요 인력: 4명 (AI/ML)

[공급]
- 현재 보유: 2명
- 가용 인력: 0명 (가동률 100%)
- 갭: -2명

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 4. 대안 분석
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[OPT-A] 증원 승인 (1명)
  비용: 연봉 8,000만원 + 채용비 500만원
  효과: 가동률 80%로 안정화
  리스크: 채용 기간 2-3개월

[OPT-B] 업무 재배치 ⭐ 단기 권고
  비용: 0원
  효과: 데이터팀 AI 역량자 1명 전환 배치
  리스크: 데이터팀 업무 영향

[OPT-C] 외주 활용
  비용: 월 1,500만원
  효과: 즉시 투입 가능
  리스크: 보안, 품질 관리

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 5. 권고안
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

단기 (즉시): OPT-B 업무 재배치
  → 데이터팀 AI 역량자 1명 임시 전환 (3개월)

중기 (Q2): OPT-A 증원 승인
  → AI/ML 선임 1명 채용 진행
  → 채용 완료 후 데이터팀 인력 복귀

근거:
- 즉각적 가동률 안정화 필요
- AI 수요 장기 증가 추세 확인
- 데이터팀 가동률 75%로 여유 있음

✅ 분석 완료!
```

## 옵션

| 옵션 | 설명 | 기본값 |
|------|------|--------|
| `--team` | 분석 대상 팀 | - |
| `--count` | 요청 인원 수 | 1 |
| `--role` | 요청 직급/역할 | - |
| `--period` | 분석 기간 | 12주 |

## 에러 처리

| 에러 | 메시지 | 해결 방법 |
|------|--------|----------|
| 팀 미지정 | "분석할 팀을 지정해주세요" | --team 옵션 사용 |
| 데이터 부족 | "팀 가동률 데이터가 없습니다" | TMS 데이터 확인 |

## 사용법

```
/headcount-analysis --team "AI개발팀"              # 특정 팀 분석
/headcount-analysis --team "AI개발팀" --count 2    # 2명 증원 분석
/headcount-analysis "AI개발팀 1명 증원 분석해줘"   # 자연어 입력
```

## 연계 Skill/Agent

| Skill/Agent | 역할 | 연계 방식 |
|-------------|------|----------|
| query-decomposition | 요청 분해 | 초기 분석 |
| option-generator | 대안 생성 | 3개 옵션 |
| impact-simulator | 영향 시뮬레이션 | 가동률 변화 |
| validator | 근거 검증 | 환각 방지 |

## 관련 문서

- [CLAUDE.md](../../../CLAUDE.md) - 프로젝트 개발 문서
- [hr-prototype-plan-v2.md](../../../hr-prototype-plan-v2.md) - 유스케이스 C-1 상세
